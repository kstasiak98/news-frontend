{"remainingRequest":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\src\\components\\seanse\\SallPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\src\\components\\seanse\\SallPage.vue","mtime":1592439134973},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRnBUb2dnbGUgZnJvbSAiQC9GUGNvbXBvbmVudHMvRnBUb2dnbGUudnVlIjsNCmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlNhbGxQYWdlIiwNCiAgY29tcG9uZW50czogeyBGcFRvZ2dsZSB9LA0KICBwcm9wczogWyJTYWxhIiwgIlNlYW5zIiwgIlNlYW5zSURuZXciXSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICB0YWJlbF9jaG9lc2VuX3NlYXRzOiBbXSwNCiAgICBzYWxsOiBbXSwNCiAgICBmaWxtOiBbXSwNCiAgICB0aWNrZXRzMTogW10sDQogICAgUmVzZXJ2ZWRfdGFiZWw6IFtdDQogIH0pLA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0RmlsbSgpOw0KICAgIHRoaXMuZ2V0U2FsbCgpOw0KICAgIHRoaXMuTWFrZUFycmF5KCk7DQogICAgdGhpcy5nZXRSZXNlcnZlZFRhYmxlKCk7DQoNCiAgICAvLyB0aGlzLk1ha2VOZXdBcnJheSgpOw0KICB9LA0KICB3YXRjaDogew0KICAgIFNlYW5zSURuZXc6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLmdldEZpbG0oKTsNCiAgICAgICAgdGhpcy5nZXRTYWxsKCk7DQogICAgICAgIHRoaXMuZ2V0UmVzZXJ2ZWRUYWJsZSgpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgZ2V0RmlsbSgpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGBhcGkvZmlsbXMvJHt0aGlzLlNlYW5zSURuZXcuZmlsbX0vYDsNCiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuZmlsbSA9IGRhdGE7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldFNhbGwoKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgYXBpL3NhbGwvJHt0aGlzLlNlYW5zSURuZXcuc2FsYX0vYDsNCiAgICAgIGNvbnNvbGUubG9nKGVuZHBvaW50KTsNCiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuc2FsbCA9IGRhdGE7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldFJlc2VydmVkVGFibGUoKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgYXBpL3Jlc2VydmVkL2A7DQogICAgICBsZXQgcmVzZXJ2ZWRzID0gW107DQogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICBkYXRhLmZvckVhY2gocGxhY2UgPT4gew0KICAgICAgICAgIGlmIChwbGFjZS5zZWFucyA9PT0gdGhpcy5TZWFuc0lEbmV3LnNlYW5zX2lkKSB7DQogICAgICAgICAgICBjb25zdCB4ID0gcGxhY2UuYWRyZXNfbWllanNjYS5zcGxpdCgiLSIpOw0KICAgICAgICAgICAgY29uc29sZS5sb2coeCk7DQogICAgICAgICAgICByZXNlcnZlZHMucHVzaCh7IHJvdzogeFswXSwgY29sdW1uOiBwYXJzZUludCh4WzFdKSB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLlJlc2VydmVkX3RhYmVsID0gcmVzZXJ2ZWRzOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIE1ha2VBcnJheSgpIHsNCiAgICAgIHRoaXMudGFiZWxfY2hvZXNlbl9zZWF0cyA9IG5ldyBBcnJheSh0aGlzLlNhbGEucm93cyk7DQogICAgfSwNCiAgICBtYWtlUmVzZXJ2ZVBsYWNlcygpIHt9LA0KICAgIC8vIE1ha2VOZXdBcnJheSgpIHsNCiAgICAvLyAgICAgdGhpcy50YWJlbF9jaG9lc2VuX3NlYXRzID0gbmV3IEFycmF5KHRoaXMuc2FsbC5udW1iZXJfb2Zfcm93cyk7DQogICAgLy8gfSwNCiAgICBnZXRfbGV0dGVyX2J5X2lkKGlkKSB7DQogICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIGlkKTsNCiAgICB9LA0KICAgIHNob3dUYWJsZSgpIHsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFiZWxfY2hvZXNlbl9zZWF0cyk7DQogICAgfSwNCiAgICBTZXRUYWJsZShlLCB5KSB7DQogICAgICBsZXQgbmV3QXJyYXkgPSBuZXcgQXJyYXkoKTsNCiAgICAgIG5ld0FycmF5ID0gdGhpcy50YWJlbF9jaG9lc2VuX3NlYXRzOw0KICAgICAgbGV0IHJvdyA9IHkuY2hhckNvZGVBdCgpOw0KICAgICAgcm93ID0gcm93IC0gNjU7DQogICAgICBuZXdBcnJheVtyb3ddID0geyBtaWVqc2NhOiBlIH07DQogICAgICB0aGlzLnRhYmVsX2Nob2VzZW5fc2VhdHMgPSBuZXdBcnJheTsNCiAgICB9LA0KICAgIEFkZFRpY2tldCgpIHsNCiAgICAgIGNvbnN0IG5ld1RpY2tldCA9IHsNCiAgICAgICAgc2VhbnM6IHRoaXMuU2VhbnNJRG5ldywNCiAgICAgICAgZmlsbV9uYW1lOiB0aGlzLmZpbG0udGl0bGUsDQogICAgICAgIG1pZWpzY2E6IHRoaXMudGFiZWxfY2hvZXNlbl9zZWF0cywNCiAgICAgICAgICBiaWxldF90eXBlOiAxLA0KICAgICAgfTsNCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiYWRkVGlja2V0VG9DYXJ0IiwgbmV3VGlja2V0KTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogIi90aWNrZXQiDQogICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["SallPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SallPage.vue","sourceRoot":"src/components/seanse","sourcesContent":["<template>\r\n  <v-container>\r\n<!--    Wybrany seans: {{ SeansIDnew }} <br />-->\r\n<!--    Wybrany film: {{ film }}<br />-->\r\n<!--    wybrana sala: {{ sall }}<br />-->\r\n<!--    {{ SeansIDnew.seans_id }}<br />-->\r\n\r\n<!--    Miejsca zarezerwowane: {{ Reserved_tabel }}-->\r\n\r\n    <!--    {{ Seans }}-->\r\n    <v-row align-content=\"center\" justify=\"center\">\r\n      <v-card align=\"center\" class=\"pa-2\">\r\n        <div class=\"rectangle\">EKRAN</div>\r\n        <template v-if=\"Reserved_tabel\">\r\n          <v-layout v-for=\"Row in sall.liczba_rzedow\" :key=\"Row\">\r\n            <FpToggle\r\n              :lay=\"get_letter_by_id(Row - 1)\"\r\n              :places=\"sall.liczba_kolumn\"\r\n              @bind_methods=\"SetTable\"\r\n              :reserved=\"Reserved_tabel\"\r\n            ></FpToggle>\r\n          </v-layout>\r\n        </template>\r\n        <!--        <v-btn @click=\"showTable\">CHECK</v-btn>-->\r\n        <v-btn @click=\"AddTicket\">KUP BILETY</v-btn>\r\n      </v-card>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport FpToggle from \"@/FPcomponents/FpToggle.vue\";\r\nimport { apiService } from \"@/common/api.service\";\r\n\r\nexport default {\r\n  name: \"SallPage\",\r\n  components: { FpToggle },\r\n  props: [\"Sala\", \"Seans\", \"SeansIDnew\"],\r\n  data: () => ({\r\n    tabel_choesen_seats: [],\r\n    sall: [],\r\n    film: [],\r\n    tickets1: [],\r\n    Reserved_tabel: []\r\n  }),\r\n  mounted() {\r\n    this.getFilm();\r\n    this.getSall();\r\n    this.MakeArray();\r\n    this.getReservedTable();\r\n\r\n    // this.MakeNewArray();\r\n  },\r\n  watch: {\r\n    SeansIDnew: {\r\n      deep: true,\r\n      handler() {\r\n        this.getFilm();\r\n        this.getSall();\r\n        this.getReservedTable();\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getFilm() {\r\n      let endpoint = `api/films/${this.SeansIDnew.film}/`;\r\n      apiService(endpoint).then(data => {\r\n        this.film = data;\r\n      });\r\n    },\r\n    getSall() {\r\n      let endpoint = `api/sall/${this.SeansIDnew.sala}/`;\r\n      console.log(endpoint);\r\n      apiService(endpoint).then(data => {\r\n        this.sall = data;\r\n      });\r\n    },\r\n    getReservedTable() {\r\n      let endpoint = `api/reserved/`;\r\n      let reserveds = [];\r\n      apiService(endpoint).then(data => {\r\n        data.forEach(place => {\r\n          if (place.seans === this.SeansIDnew.seans_id) {\r\n            const x = place.adres_miejsca.split(\"-\");\r\n            console.log(x);\r\n            reserveds.push({ row: x[0], column: parseInt(x[1]) });\r\n          }\r\n        });\r\n        this.Reserved_tabel = reserveds;\r\n      });\r\n    },\r\n\r\n    MakeArray() {\r\n      this.tabel_choesen_seats = new Array(this.Sala.rows);\r\n    },\r\n    makeReservePlaces() {},\r\n    // MakeNewArray() {\r\n    //     this.tabel_choesen_seats = new Array(this.sall.number_of_rows);\r\n    // },\r\n    get_letter_by_id(id) {\r\n      return String.fromCharCode(65 + id);\r\n    },\r\n    showTable() {\r\n      console.log(this.tabel_choesen_seats);\r\n    },\r\n    SetTable(e, y) {\r\n      let newArray = new Array();\r\n      newArray = this.tabel_choesen_seats;\r\n      let row = y.charCodeAt();\r\n      row = row - 65;\r\n      newArray[row] = { miejsca: e };\r\n      this.tabel_choesen_seats = newArray;\r\n    },\r\n    AddTicket() {\r\n      const newTicket = {\r\n        seans: this.SeansIDnew,\r\n        film_name: this.film.title,\r\n        miejsca: this.tabel_choesen_seats,\r\n          bilet_type: 1,\r\n      };\r\n      this.$store.commit(\"addTicketToCart\", newTicket);\r\n      this.$router.push({\r\n        path: \"/ticket\"\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.rectangle {\r\n  width: 60%;\r\n  background-color: lightgrey;\r\n  text-align: center;\r\n  margin: auto;\r\n}\r\n</style>\r\n"]}]}