{"remainingRequest":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\src\\components\\seanse\\SallPage.vue?vue&type=style&index=0&id=5be2c702&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\src\\components\\seanse\\SallPage.vue","mtime":1592439134973},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\krzys\\PycharmProjects\\mysqlconnection\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnJlY3RhbmdsZSB7DQogIHdpZHRoOiA2MCU7DQogIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JleTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBtYXJnaW46IGF1dG87DQp9DQo="},{"version":3,"sources":["SallPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA","file":"SallPage.vue","sourceRoot":"src/components/seanse","sourcesContent":["<template>\r\n  <v-container>\r\n<!--    Wybrany seans: {{ SeansIDnew }} <br />-->\r\n<!--    Wybrany film: {{ film }}<br />-->\r\n<!--    wybrana sala: {{ sall }}<br />-->\r\n<!--    {{ SeansIDnew.seans_id }}<br />-->\r\n\r\n<!--    Miejsca zarezerwowane: {{ Reserved_tabel }}-->\r\n\r\n    <!--    {{ Seans }}-->\r\n    <v-row align-content=\"center\" justify=\"center\">\r\n      <v-card align=\"center\" class=\"pa-2\">\r\n        <div class=\"rectangle\">EKRAN</div>\r\n        <template v-if=\"Reserved_tabel\">\r\n          <v-layout v-for=\"Row in sall.liczba_rzedow\" :key=\"Row\">\r\n            <FpToggle\r\n              :lay=\"get_letter_by_id(Row - 1)\"\r\n              :places=\"sall.liczba_kolumn\"\r\n              @bind_methods=\"SetTable\"\r\n              :reserved=\"Reserved_tabel\"\r\n            ></FpToggle>\r\n          </v-layout>\r\n        </template>\r\n        <!--        <v-btn @click=\"showTable\">CHECK</v-btn>-->\r\n        <v-btn @click=\"AddTicket\">KUP BILETY</v-btn>\r\n      </v-card>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport FpToggle from \"@/FPcomponents/FpToggle.vue\";\r\nimport { apiService } from \"@/common/api.service\";\r\n\r\nexport default {\r\n  name: \"SallPage\",\r\n  components: { FpToggle },\r\n  props: [\"Sala\", \"Seans\", \"SeansIDnew\"],\r\n  data: () => ({\r\n    tabel_choesen_seats: [],\r\n    sall: [],\r\n    film: [],\r\n    tickets1: [],\r\n    Reserved_tabel: []\r\n  }),\r\n  mounted() {\r\n    this.getFilm();\r\n    this.getSall();\r\n    this.MakeArray();\r\n    this.getReservedTable();\r\n\r\n    // this.MakeNewArray();\r\n  },\r\n  watch: {\r\n    SeansIDnew: {\r\n      deep: true,\r\n      handler() {\r\n        this.getFilm();\r\n        this.getSall();\r\n        this.getReservedTable();\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getFilm() {\r\n      let endpoint = `api/films/${this.SeansIDnew.film}/`;\r\n      apiService(endpoint).then(data => {\r\n        this.film = data;\r\n      });\r\n    },\r\n    getSall() {\r\n      let endpoint = `api/sall/${this.SeansIDnew.sala}/`;\r\n      console.log(endpoint);\r\n      apiService(endpoint).then(data => {\r\n        this.sall = data;\r\n      });\r\n    },\r\n    getReservedTable() {\r\n      let endpoint = `api/reserved/`;\r\n      let reserveds = [];\r\n      apiService(endpoint).then(data => {\r\n        data.forEach(place => {\r\n          if (place.seans === this.SeansIDnew.seans_id) {\r\n            const x = place.adres_miejsca.split(\"-\");\r\n            console.log(x);\r\n            reserveds.push({ row: x[0], column: parseInt(x[1]) });\r\n          }\r\n        });\r\n        this.Reserved_tabel = reserveds;\r\n      });\r\n    },\r\n\r\n    MakeArray() {\r\n      this.tabel_choesen_seats = new Array(this.Sala.rows);\r\n    },\r\n    makeReservePlaces() {},\r\n    // MakeNewArray() {\r\n    //     this.tabel_choesen_seats = new Array(this.sall.number_of_rows);\r\n    // },\r\n    get_letter_by_id(id) {\r\n      return String.fromCharCode(65 + id);\r\n    },\r\n    showTable() {\r\n      console.log(this.tabel_choesen_seats);\r\n    },\r\n    SetTable(e, y) {\r\n      let newArray = new Array();\r\n      newArray = this.tabel_choesen_seats;\r\n      let row = y.charCodeAt();\r\n      row = row - 65;\r\n      newArray[row] = { miejsca: e };\r\n      this.tabel_choesen_seats = newArray;\r\n    },\r\n    AddTicket() {\r\n      const newTicket = {\r\n        seans: this.SeansIDnew,\r\n        film_name: this.film.title,\r\n        miejsca: this.tabel_choesen_seats,\r\n          bilet_type: 1,\r\n      };\r\n      this.$store.commit(\"addTicketToCart\", newTicket);\r\n      this.$router.push({\r\n        path: \"/ticket\"\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.rectangle {\r\n  width: 60%;\r\n  background-color: lightgrey;\r\n  text-align: center;\r\n  margin: auto;\r\n}\r\n</style>\r\n"]}]}